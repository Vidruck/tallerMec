<!DOCTYPE html>
<!--
  Vista: Listado de Clientes
  Descripción: Tabla de clientes registrados con opciones para gestión de vehículos.
  Roles: TRABAJADOR, JEFE_AREA, ADMIN
-->
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Recepción | AutoWizards</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>

    <nav class="navbar-custom mb-4">
        <div class="nav-brand">
            <a th:href="@{/dashboard}" style="color: inherit;"><i class="fa fa-arrow-left"></i> Volver al Dashboard</a>
        </div>
        <div class="user-info">
            <span class="badge badge-primary">Módulo Recepción</span>
        </div>
    </nav>

    <div class="container">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2>Clientes y Vehículos</h2>
                <p style="color: var(--ctp-subtext0);">Gestiona la cartera de clientes o registra nuevos ingresos.</p>
            </div>
            <a th:href="@{/clientes/nuevo}" class="btn btn-primary">
                <i class="fa fa-user-plus"></i> Nuevo Cliente
            </a>
        </div>

        <div class="toolbar-container">
            <div class="search-box">
                <i class="fa fa-search search-icon"></i>
                <input type="text" id="tableSearch" class="form-control search-input"
                    placeholder="Buscar por nombre, correo o ID...">
            </div>
        </div>

        <div class="table-responsive">
            <table class="table-custom">
                <thead>
                    <tr>
                        <th>ID / INE</th>
                        <th>Cliente</th>
                        <th>Contacto</th>
                        <th>Autos Registrados</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="cliente : ${listaClientes}">
                        <td th:text="${cliente.idCliente}" style="font-family: monospace;">C-001</td>
                        <td>
                            <div style="font-weight: 600; color: var(--ctp-text);" th:text="${cliente.nombre}">Juan
                                Pérez</div>
                            <small th:text="${cliente.direccion}">Calle Falsa 123</small>
                        </td>
                        <td>
                            <div th:text="${cliente.correo}">juan@mail.com</div>
                            <small th:text="${cliente.telefono}">55-1234-5678</small>
                        </td>
                        <td>
                            <span class="badge badge-success"
                                th:text="${cliente.vehiculos != null ? cliente.vehiculos.size() : 0} + ' Vehículos'">0</span>
                        </td>
                        <td>
                            <a th:href="@{/clientes/{id}/vehiculos/nuevo(id=${cliente.idCliente})}" class="btn-icon"
                                title="Agregar Auto">
                                <i class="fa fa-car"></i>
                            </a>
                            <a href="@{/taller/ordenes/nueva(idVehiculo=${vehiculo.idVehiculo})}" class="btn-icon"
                                title="Nueva Orden" style="color: var(--accent-warning);">
                                <i class="fa fa-file-text"></i>
                            </a>
                        </td>
                    </tr>
                    <tr th:if="${listaClientes.empty}">
                        <td colspan="5" class="text-center py-4">No hay clientes registrados aún.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script th:src="@{/js/app.js}"></script>
</body>

</html>